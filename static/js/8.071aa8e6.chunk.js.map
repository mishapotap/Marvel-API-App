{"version":3,"sources":["components/singleComic/SingleComic.js","components/pages/SingleComicPage.js","components/errorMessage/error.gif","components/errorMessage/ErrorMessage.js","services/MarvelService.js","hooks/http.hook.js"],"names":["View","comic","title","description","pageCount","thumbnail","language","price","className","name","content","src","alt","to","SingleComic","comicId","useParams","useState","setComic","useMarvelService","loading","error","getComic","clearError","useEffect","updateComic","then","onComicLoaded","errorMessage","ErrorMessage","spinner","Spinner","SingleComicPage","style","display","width","height","objectFit","margin","img","setLoading","setError","request","useCallback","url","a","method","body","headers","fetch","response","ok","Error","status","json","data","message","useHttp","_apiBase","_apiKey","getAllCharacters","offset","res","results","map","_transformCharacter","getCharacterByName","getCharacter","id","getAllComics","_transformComics","char","slice","path","extension","homepage","urls","wiki","comics","items","textObjects","prices"],"mappings":"8MAyCMA,EAAO,SAAC,GAAe,IAAbC,EAAY,EAAZA,MACJC,EAA8DD,EAA9DC,MAAOC,EAAuDF,EAAvDE,YAAaC,EAA0CH,EAA1CG,UAAWC,EAA+BJ,EAA/BI,UAAWC,EAAoBL,EAApBK,SAAUC,EAAUN,EAAVM,MAC5D,OACI,sBAAKC,UAAU,eAAf,UACI,cAAC,IAAD,UACI,eAAC,IAAD,WACI,sBAAMC,KAAK,cAAcC,QAAO,UAAKR,EAAL,iBAChC,gCAAQA,SAGhB,qBAAKS,IAAKN,EAAWO,IAAKV,EAAOM,UAAU,sBAC3C,sBAAKA,UAAU,qBAAf,UACI,oBAAIA,UAAU,qBAAd,SAAoCN,IACpC,mBAAGM,UAAU,sBAAb,SAAoCL,IACpC,mBAAGK,UAAU,sBAAb,SAAoCJ,IACpC,oBAAGI,UAAU,sBAAb,uBAA8CF,KAC9C,qBAAKE,UAAU,sBAAf,SAAsCD,OAE1C,cAAC,IAAD,CAAMM,GAAG,UAAUL,UAAU,qBAA7B,6BAOGM,EA1DK,WAChB,IAAQC,EAAYC,cAAZD,QACR,EAA0BE,mBAAS,MAAnC,mBAAOhB,EAAP,KAAciB,EAAd,KACA,EAAiDC,cAAzCC,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,MAAOC,EAAxB,EAAwBA,SAAUC,EAAlC,EAAkCA,WAElCC,qBAAU,WACNC,MAED,CAACV,IAEJ,IAAMU,EAAc,WACXV,IAGLQ,IACAD,EAASP,GAASW,KAAKC,KAGrBA,EAAgB,SAAC1B,GACnBiB,EAASjB,IAGP2B,EAAeP,EAAQ,cAACQ,EAAA,EAAD,IAAmB,KAC1CC,EAAUV,EAAU,cAACW,EAAA,EAAD,IAAc,KAClCrB,EAAYU,GAAWC,IAAUpB,EAAkC,KAAzB,cAAC,EAAD,CAAMA,MAAOA,IAC7D,OACI,qCACK2B,EACAE,EACApB,MC/BEsB,UAJS,WACpB,OAAO,cAAC,EAAD,M,gCCHI,UAA0B,kC,OCkB1BH,IAhBM,WACjB,OACI,qBACII,MAAO,CACHC,QAAS,QACTC,MAAO,QACPC,OAAQ,QACRC,UAAW,UACXC,OAAQ,UAEZ3B,IAAK4B,EACL3B,IAAI,kB,2EC+DDO,IAzEU,WACrB,MCFmB,WACnB,MAA8BF,oBAAS,GAAvC,mBAAOG,EAAP,KAAgBoB,EAAhB,KACA,EAA0BvB,mBAAS,MAAnC,mBAAOI,EAAP,KAAcoB,EAAd,KAgCA,MAAO,CAAErB,UAASC,QAAOqB,QA9BTC,sBAAW,uCACvB,WACIC,GADJ,mCAAAC,EAAA,6DAEIC,EAFJ,+BAEa,MACTC,EAHJ,+BAGW,KACPC,EAJJ,+BAIc,CAAE,eAAgB,oBAE5BR,GAAW,GANf,kBAS+BS,MAAML,EAAK,CAAEE,SAAQC,OAAMC,YAT1D,WAScE,EATd,QAWsBC,GAXtB,uBAYkB,IAAIC,MAAJ,yBAA4BR,EAA5B,qBAA4CM,EAASG,SAZvE,yBAc2BH,EAASI,OAdpC,eAccC,EAdd,OAeQf,GAAW,GAfnB,kBAgBee,GAhBf,wCAkBQf,GAAW,GACXC,EAAS,KAAMe,SAnBvB,+DADuB,sDAwBvB,IAM8BjC,WAFfoB,uBAAY,kBAAMF,EAAS,QAAO,KD9BLgB,GAAxCrC,EAAR,EAAQA,QAASsB,EAAjB,EAAiBA,QAASrB,EAA1B,EAA0BA,MAAOE,EAAjC,EAAiCA,WAE3BmC,EAAW,4CACXC,EAAU,0CAGVC,EAAgB,uCAAG,0CAAAf,EAAA,6DAAOgB,EAAP,+BAFL,IAEK,SAEHnB,EAAQ,GAAD,OAAIgB,EAAJ,qCAAyCG,EAAzC,YAAmDF,IAFvD,cAEfG,EAFe,yBAGdA,EAAIP,KAAKQ,QAAQC,IAAIC,IAHP,2CAAH,qDAMhBC,EAAkB,uCAAG,WAAOzD,GAAP,eAAAoC,EAAA,sEACLH,EAAQ,GAAD,OAAIgB,EAAJ,2BAA+BjD,EAA/B,YAAuCkD,IADzC,cACjBG,EADiB,yBAEhBA,EAAIP,KAAKQ,QAAQC,IAAIC,IAFL,2CAAH,sDAKlBE,EAAY,uCAAG,WAAOC,GAAP,eAAAvB,EAAA,sEACCH,EAAQ,GAAD,OAAIgB,EAAJ,sBAA0BU,EAA1B,YAAgCT,IADxC,cACXG,EADW,yBAEVG,EAAoBH,EAAIP,KAAKQ,QAAQ,KAF3B,2CAAH,sDAKZM,EAAY,uCAAG,0CAAAxB,EAAA,6DAAOgB,EAAP,+BAAgB,EAAhB,SACCnB,EAAQ,GAAD,OAAIgB,EAAJ,iCAAqCG,EAArC,YAA+CF,IADvD,cACXG,EADW,yBAEVA,EAAIP,KAAKQ,QAAQC,IAAIM,IAFX,2CAAH,qDAKZhD,EAAQ,uCAAG,WAAO8C,GAAP,eAAAvB,EAAA,sEACKH,EAAQ,GAAD,OAAIgB,EAAJ,kBAAsBU,EAAtB,YAA4BT,IADxC,cACPG,EADO,yBAENQ,EAAiBR,EAAIP,KAAKQ,QAAQ,KAF5B,2CAAH,sDAKRE,EAAsB,SAACM,GACzB,MAAO,CACHH,GAAIG,EAAKH,GACT3D,KAAM8D,EAAK9D,KACXN,YAAaoE,EAAKpE,YAAL,UACJoE,EAAKpE,YAAYqE,MAAM,EAAG,KADtB,OAEP,kDACNnE,UAAWkE,EAAKlE,UAAUoE,KAAO,IAAMF,EAAKlE,UAAUqE,UACtDC,SAAUJ,EAAKK,KAAK,GAAGhC,IACvBiC,KAAMN,EAAKK,KAAK,GAAGhC,IACnBkC,OAAQP,EAAKO,OAAOC,MAAMP,MAAM,EAAG,MAIrCF,EAAmB,SAACQ,GACtB,MAAO,CACHV,GAAIU,EAAOV,GACXlE,MAAO4E,EAAO5E,MACdC,YAAa2E,EAAO3E,aAAe,+CACnCC,UAAW0E,EAAO1E,UAAP,UACF0E,EAAO1E,UADL,UAEL,2CACNC,UAAWyE,EAAOzE,UAAUoE,KAAO,IAAMK,EAAOzE,UAAUqE,UAC1DpE,SAAUwE,EAAOE,YAAY1E,UAAY,QACzCC,MAAkC,IAA3BuE,EAAOG,OAAO,GAAG1E,MAAc,kBAA/B,UAAsDuE,EAAOG,OAAO,GAAG1E,MAAvE,OAIf,MAAO,CACHa,UACAC,QACAuC,mBACAO,eACA5C,aACA8C,eACA/C,WACA4C","file":"static/js/8.071aa8e6.chunk.js","sourcesContent":["import { useParams, Link } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport { Helmet, HelmetProvider } from \"react-helmet-async\";\nimport useMarvelService from \"../../services/MarvelService\";\nimport Spinner from \"../spinner/Spinner\";\nimport ErrorMessage from \"../errorMessage/ErrorMessage\";\nimport \"./singleComic.scss\";\n\nconst SingleComic = () => {\n    const { comicId } = useParams(); // Вытащил comicId из параметров\n    const [comic, setComic] = useState(null);\n    const { loading, error, getComic, clearError } = useMarvelService(); // Из хука вытащил нужные\n\n    useEffect(() => {\n        updateComic();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [comicId]); // Сработает при mount и при обновлении comicId\n\n    const updateComic = () => {\n        if (!comicId) {\n            return;\n        }\n        clearError();\n        getComic(comicId).then(onComicLoaded);\n    }; // Главный метод (нет спиннера и catch потому что они внутри хука useMarvelService)\n\n    const onComicLoaded = (comic) => {\n        setComic(comic);\n    }; // Устанавливает комикс в state (помощь)\n\n    const errorMessage = error ? <ErrorMessage /> : null;\n    const spinner = loading ? <Spinner /> : null;\n    const content = !(loading || error || !comic) ? <View comic={comic} /> : null;\n    return (\n        <>\n            {errorMessage}\n            {spinner}\n            {content}\n        </>\n    );\n};\nconst View = ({ comic }) => {\n    const { title, description, pageCount, thumbnail, language, price } = comic; // Деструктуризация объекта comic\n    return (\n        <div className=\"single-comic\">\n            <HelmetProvider>\n                <Helmet>\n                    <meta name=\"description\" content={`${title} comic book`} />\n                    <title>{title}</title>\n                </Helmet>\n            </HelmetProvider>\n            <img src={thumbnail} alt={title} className=\"single-comic__img\" />\n            <div className=\"single-comic__info\">\n                <h2 className=\"single-comic__name\">{title}</h2>\n                <p className=\"single-comic__descr\">{description}</p>\n                <p className=\"single-comic__descr\">{pageCount}</p>\n                <p className=\"single-comic__descr\">Language: {language}</p>\n                <div className=\"single-comic__price\">{price}</div>\n            </div>\n            <Link to=\"/comics\" className=\"single-comic__back\">\n                Back to all\n            </Link>\n        </div>\n    );\n}; // Получает в себя объект comic и возвращает верстку основываясь на нем\n\nexport default SingleComic;\n","import SingleComic from \"../singleComic/SingleComic\";\n\nconst SingleComicPage = () => {\n    return <SingleComic />;\n};\n\nexport default SingleComicPage;\n","export default __webpack_public_path__ + \"static/media/error.42292aa1.gif\";","import img from \"./error.gif\";\n\nconst ErrorMessage = () => {\n    return (\n        <img\n            style={{\n                display: \"block\",\n                width: \"250px\",\n                height: \"250px\",\n                objectFit: \"contain\",\n                margin: \"0 auto\",\n            }}\n            src={img}\n            alt=\"Error_image\"\n        />\n    );\n};\n\nexport default ErrorMessage;\n","import { useHttp } from \"../hooks/http.hook\";\n\n// Get requests\nconst useMarvelService = () => {\n    const { loading, request, error, clearError } = useHttp();\n\n    const _apiBase = \"https://gateway.marvel.com:443/v1/public/\"; // _ означает не трогать данные переменные для других разработчиков\n    const _apiKey = \"apikey=42666d0364f9ef05a9229fe8de769fa3\";\n    const _baseOffset = 210; //140 210\n\n    const getAllCharacters = async (offset = _baseOffset) => {\n        // Добавляем offset в аргументы для гибкости\n        const res = await request(`${_apiBase}characters?limit=9&offset=${offset}&${_apiKey}`);\n        return res.data.results.map(_transformCharacter); // Возвращает массив персонажей\n    };\n\n    const getCharacterByName = async (name) => {\n        const res = await request(`${_apiBase}characters?name=${name}&${_apiKey}`);\n        return res.data.results.map(_transformCharacter);\n    }; // Возвращает одного персонажа по имени\n\n    const getCharacter = async (id) => {\n        const res = await request(`${_apiBase}characters/${id}?${_apiKey}`);\n        return _transformCharacter(res.data.results[0]);\n    }; // Возвращает одного персонажа по id\n\n    const getAllComics = async (offset = 0) => {\n        const res = await request(`${_apiBase}comics?limit=8&offset=${offset}&${_apiKey}`);\n        return res.data.results.map(_transformComics);\n    }; // Вовзращает массив комиксов\n\n    const getComic = async (id) => {\n        const res = await request(`${_apiBase}comics/${id}?${_apiKey}`);\n        return _transformComics(res.data.results[0]);\n    }; // Вовзращает один комикс по id\n\n    const _transformCharacter = (char) => {\n        return {\n            id: char.id,\n            name: char.name,\n            description: char.description\n                ? `${char.description.slice(0, 210)}...`\n                : \"Unfortunately this character has no description\",\n            thumbnail: char.thumbnail.path + \".\" + char.thumbnail.extension,\n            homepage: char.urls[0].url,\n            wiki: char.urls[1].url,\n            comics: char.comics.items.slice(0, 10), // Массив\n        };\n    }; // Трансформирует персоанажа в нужный нам формат\n\n    const _transformComics = (comics) => {\n        return {\n            id: comics.id,\n            title: comics.title,\n            description: comics.description || \"Unfortunately this comics has no description\",\n            pageCount: comics.pageCount\n                ? `${comics.pageCount} pages`\n                : \"No information about the number of pages\",\n            thumbnail: comics.thumbnail.path + \".\" + comics.thumbnail.extension,\n            language: comics.textObjects.language || \"en-us\",\n            price: comics.prices[0].price === 0 ? \"Price not found\" : `${comics.prices[0].price}$`,\n        };\n    }; // Трансформирует комиксы в нужный нам формат\n\n    return {\n        loading,\n        error,\n        getAllCharacters,\n        getCharacter,\n        clearError,\n        getAllComics,\n        getComic,\n        getCharacterByName,\n    };\n};\n\nexport default useMarvelService;\n","import { useState, useCallback } from \"react\";\n\nexport const useHttp = () => {\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(null);\n\n    const request = useCallback(\n        async (\n            url,\n            method = \"GET\",\n            body = null,\n            headers = { \"Content-type\": \"application/json\" }\n        ) => {\n            setLoading(true); // Показываем спиннер в начале запроса\n            try {\n                // Try / catch - пытаемся сделать запрос на сервер\n                const response = await fetch(url, { method, body, headers });\n                // Response - ответ Await - ждем ответа от сервера\n                if (!response.ok) {\n                    throw new Error(`Couldn't fetch ${url}, status: ${response.status}`);\n                }\n                const data = await response.json(); // data - чистые данные которые мы получаем при запросе к API\n                setLoading(false); // Убираем спиннер\n                return data;\n            } catch (error) {\n                setLoading(false); // Убираем спиннер\n                setError(error.message); // Устанавливаем ошибку /Показываем текст ошибки\n                throw error; // Вернет ошибку\n            }\n        },\n        []\n    ); // Вернет чистые данные которые вернет API (data) или выкинет ошибку\n    // Сразу в нем контролируем спиннер при загрузке и ошибку при запросе данных\n\n    const clearError = useCallback(() => setError(null), []); //clearError перезатирает ошибку\n\n    return { loading, error, request, clearError }; // Возвращаем нужное\n};\n"],"sourceRoot":""}